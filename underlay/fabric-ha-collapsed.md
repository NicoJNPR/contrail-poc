Contrail POC

Underlay - Contrail Fabric Management HA

Topology

   +-------------+
   |   client    |
   | 172.16.1.10 |
   +-------------+
          |
        br-ext
          |
  +-----------------+-----------------+  +-----------------+-----------------+
  | ge-0/0/0        | ge-0/0/1        |  | ge-0/0/0        | ge-0/0/1        |
  | 172.16.1.254    |                 |  |                 |                 |
  |                                   |  |                                   |
  | vmx-1                             |  | vmx-2                             |
  |  em0: 10.6.8.31                   |  |  em0: 10.6.8.32                   |
  |  lo0: 10.6.0.31                   |  |  lo0: 10.6.0.32                   |
  |  ASN: 64031                       |  |  ASN: 64032                       |
  |                                   |  |                                   |
  | 10.6.30.1/31    | 10.6.30.5/31    |  | 10.6.30.3/31    | 10.6.30.7/31    |
  | ge-0/0/2        | ge-0/0/3        |  | ge-0/0/2        | ge-0/0/3        |
  +-----------------+-----------------+  +-----------------+-----------------+
       |                  |                   |                 |
       |               +--(-------------------+                 |
       |               |  |                                     |
       |               |  +-------------------+                 |
       |               |                      |                 |
  +-----------------+-----------------+  +-----------------+-----------------+
  | xe-0/0/0        | xe-0/0/1        |  | xe-0/0/0        | xe-0/0/1        |
  | 10.6.30.0/31    | 10.6.30.2/31    |  | 10.6.30.4/31    | 10.6.30.6/31    |
  |                                   |  |                                   |
  | vqfx-spine-1                      |  | vqfx-spine-2                      |
  |  em0: 10.6.8.21                   |  |  em0: 10.6.8.22                   |
  |  lo0: 10.6.0.21                   |  |  lo0: 10.6.0.22                   |
  |  ASN: 64021                       |  |  ASN: 64022                       |
  |                                   |  |                                   |
  | 10.6.20.0/31    | 10.6.20.2/31    |  | 10.6.20.4/31    | 10.6.20.6/31    |
  | xe-0/0/4        | xe-0/0/3        |  | xe-0/0/2        | xe-0/0/3        |
  +-----------------+-----------------+  +-----------------+-----------------+
       |           |           |              |           |
       |           |           |              |           |
     br-r1    +---------+      |         +---------+      |
       |      | bms-12  |      |         | bms-22  |      |
       |      +---------+      |         +---------+      |
       |                       |                          |
  +---------+                +------------------------------+
  | cluster |                |          bms-dh              |
  +---------+                +------------------------------+
       |
       |                     management: 10.6.8.0/24
     br-int                  loopback:   10.6.0.0/24
   10.6.8.254                spine-leaf: 10.6.20.0/24 10.6.30.0/24
       |                     rack-1:     10.6.11.0/24
    HAProxy                  rack-2:     10.6.12.0/24

  Contrail web UI:   https://<host>:8143
  Contrail Command:  https://<host>:9091
  OpenStack Horizon: http://<host>
Resource

                  vCPU    memory(GB)    disk(GB)    OS
vqfx-spine-1-re     1         1           4         Junos 18.1R1.9
vqfx-spine-1-pfe    1         2           4         Junos 18.1R1.9
vqfx-spine-2-re     1         1           4         Junos 18.1R1.9
vqfx-spine-2-pfe    1         2           4         Junos 18.1R1.9
vmx-1-vcp           1         1           4         Junos 18.3R1.9
vmx-1-vfp           4         2           4         Junos 18.3R1.9
vmx-2-vcp           1         1           4         Junos 18.3R1.9
vmx-2-vfp           4         2           4         Junos 18.3R1.9
bms-12              1         1           1         Cirros 0.4.0
bms-22              1         1           1         Cirros 0.4.0
bms-dh              1         1           4         CentOS 7.5-1805
----------------------------------------------------------------
Total              21        21          54
